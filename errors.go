// Copyright (c) 2013 Jian Zhen <zhenjl@gmail.com>
//
// All rights reserved.
//
// Use of this source code is governed by the Apache 2.0 license.

package qld

import (
	"errors"
	"fmt"
)

var (
	errNotProtocol41 = errors.New("Client does not support protocol 4.1+")
)

type SQLError struct {
	Code    int
	Message string
	State   string
}

var _ error = (*SQLError)(nil)

func (this *SQLError) Error() string {
	return fmt.Sprintf("%s(%d): %s", this.State, this.Code, this.Message)
}

var SQLErrors map[int]*SQLError = map[int]*SQLError{
	1022: &SQLError{1022, "ER_DUP_KEY", "23000"},
	1037: &SQLError{1037, "ER_OUTOFMEMORY", "HY001"},
	1038: &SQLError{1038, "ER_OUT_OF_SORTMEMORY", "HY001"},
	1040: &SQLError{1040, "ER_CON_COUNT_ERROR", "08004"},
	1042: &SQLError{1042, "ER_BAD_HOST_ERROR", "08S01"},
	1043: &SQLError{1043, "ER_HANDSHAKE_ERROR", "08S01"},
	1044: &SQLError{1044, "ER_DBACCESS_DENIED_ERROR", "42000"},
	1045: &SQLError{1045, "ER_ACCESS_DENIED_ERROR", "28000"},
	1047: &SQLError{1047, "ER_UNKNOWN_COM_ERROR", "HY000"},
	1050: &SQLError{1050, "ER_TABLE_EXISTS_ERROR", "42S01"},
	1051: &SQLError{1051, "ER_BAD_TABLE_ERROR", "42S02"},
	1052: &SQLError{1052, "ER_NON_UNIQ_ERROR", "23000"},
	1053: &SQLError{1053, "ER_SERVER_SHUTDOWN", "08S01"},
	1054: &SQLError{1054, "ER_BAD_FIELD_ERROR", "42S22"},
	1055: &SQLError{1055, "ER_WRONG_FIELD_WITH_GROUP", "42000"},
	1056: &SQLError{1056, "ER_WRONG_GROUP_FIELD", "42000"},
	1057: &SQLError{1057, "ER_WRONG_SUM_SELECT", "42000"},
	1058: &SQLError{1058, "ER_WRONG_VALUE_COUNT", "21S01"},
	1059: &SQLError{1059, "ER_TOO_LONG_IDENT", "42000"},
	1060: &SQLError{1060, "ER_DUP_FIELDNAME", "42S21"},
	1061: &SQLError{1061, "ER_DUP_KEYNAME", "42000"},
	1062: &SQLError{1062, "ER_DUP_ENTRY", "23000"},
	1063: &SQLError{1063, "ER_WRONG_FIELD_SPEC", "42000"},
	1064: &SQLError{1064, "ER_PARSE_ERROR", "42000"},
	1065: &SQLError{1065, "ER_EMPTY_QUERY", "42000"},
	1066: &SQLError{1066, "ER_NONUNIQ_TABLE", "42000"},
	1067: &SQLError{1067, "ER_INVALID_DEFAULT", "42000"},
	1068: &SQLError{1068, "ER_MULTIPLE_PRI_KEY", "42000"},
	1069: &SQLError{1069, "ER_TOO_MANY_KEYS", "42000"},
	1070: &SQLError{1070, "ER_TOO_MANY_KEY_PARTS", "42000"},
	1071: &SQLError{1071, "ER_TOO_LONG_KEY", "42000"},
	1072: &SQLError{1072, "ER_KEY_COLUMN_DOES_NOT_EXITS", "42000"},
	1073: &SQLError{1073, "ER_BLOB_USED_AS_KEY", "42000"},
	1074: &SQLError{1074, "ER_TOO_BIG_FIELDLENGTH", "42000"},
	1075: &SQLError{1075, "ER_WRONG_AUTO_KEY", "42000"},
	1080: &SQLError{1080, "ER_FORCING_CLOSE", "08S01"},
	1081: &SQLError{1081, "ER_IPSOCK_ERROR", "08S01"},
	1082: &SQLError{1082, "ER_NO_SUCH_INDEX", "42S12"},
	1083: &SQLError{1083, "ER_WRONG_FIELD_TERMINATORS", "42000"},
	1084: &SQLError{1084, "ER_BLOBS_AND_NO_TERMINATED", "42000"},
	1090: &SQLError{1090, "ER_CANT_REMOVE_ALL_FIELDS", "42000"},
	1091: &SQLError{1091, "ER_CANT_DROP_FIELD_OR_KEY", "42000"},
	1101: &SQLError{1101, "ER_BLOB_CANT_HAVE_DEFAULT", "42000"},
	1102: &SQLError{1102, "ER_WRONG_DB_NAME", "42000"},
	1103: &SQLError{1103, "ER_WRONG_TABLE_NAME", "42000"},
	1104: &SQLError{1104, "ER_TOO_BIG_SELECT", "42000"},
	1106: &SQLError{1106, "ER_UNKNOWN_PROCEDURE", "42000"},
	1107: &SQLError{1107, "ER_WRONG_PARAMCOUNT_TO_PROCEDURE", "42000"},
	1109: &SQLError{1109, "ER_UNKNOWN_TABLE", "42S02"},
	1110: &SQLError{1110, "ER_FIELD_SPECIFIED_TWICE", "42000"},
	1112: &SQLError{1112, "ER_UNSUPPORTED_EXTENSION", "42000"},
	1113: &SQLError{1113, "ER_TABLE_MUST_HAVE_COLUMNS", "42000"},
	1115: &SQLError{1115, "ER_UNKNOWN_CHARACTER_SET", "42000"},
	1118: &SQLError{1118, "ER_TOO_BIG_ROWSIZE", "42000"},
	1120: &SQLError{1120, "ER_WRONG_OUTER_JOIN", "42000"},
	1121: &SQLError{1121, "ER_NULL_COLUMN_IN_INDEX", "42000"},
	1129: &SQLError{1129, "ER_HOST_IS_BLOCKED", "HY000"},
	1130: &SQLError{1130, "ER_HOST_NOT_PRIVILEGED", "HY000"},
	1131: &SQLError{1131, "ER_PASSWORD_ANONYMOUS_USER", "42000"},
	1132: &SQLError{1132, "ER_PASSWORD_NOT_ALLOWED", "42000"},
	1133: &SQLError{1133, "ER_PASSWORD_NO_MATCH", "42000"},
	1136: &SQLError{1136, "ER_WRONG_VALUE_COUNT_ON_ROW", "21S01"},
	1138: &SQLError{1138, "ER_INVALID_USE_OF_NULL", "42000"},
	1139: &SQLError{1139, "ER_REGEXP_ERROR", "42000"},
	1140: &SQLError{1140, "ER_MIX_OF_GROUP_FUNC_AND_FIELDS", "42000"},
	1141: &SQLError{1141, "ER_NONEXISTING_GRANT", "42000"},
	1142: &SQLError{1142, "ER_TABLEACCESS_DENIED_ERROR", "42000"},
	1143: &SQLError{1143, "ER_COLUMNACCESS_DENIED_ERROR", "42000"},
	1144: &SQLError{1144, "ER_ILLEGAL_GRANT_FOR_TABLE", "42000"},
	1145: &SQLError{1145, "ER_GRANT_WRONG_HOST_OR_USER", "42000"},
	1146: &SQLError{1146, "ER_NO_SUCH_TABLE", "42S02"},
	1147: &SQLError{1147, "ER_NONEXISTING_TABLE_GRANT", "42000"},
	1148: &SQLError{1148, "ER_NOT_ALLOWED_COMMAND", "42000"},
	1149: &SQLError{1149, "ER_SYNTAX_ERROR", "42000"},
	1152: &SQLError{1152, "ER_ABORTING_CONNECTION", "08S01"},
	1153: &SQLError{1153, "ER_NET_PACKET_TOO_LARGE", "08S01"},
	1154: &SQLError{1154, "ER_NET_READ_ERROR_FROM_PIPE", "08S01"},
	1155: &SQLError{1155, "ER_NET_FCNTL_ERROR", "08S01"},
	1156: &SQLError{1156, "ER_NET_PACKETS_OUT_OF_ORDER", "08S01"},
	1157: &SQLError{1157, "ER_NET_UNCOMPRESS_ERROR", "08S01"},
	1158: &SQLError{1158, "ER_NET_READ_ERROR", "08S01"},
	1159: &SQLError{1159, "ER_NET_READ_INTERRUPTED", "08S01"},
	1160: &SQLError{1160, "ER_NET_ERROR_ON_WRITE", "08S01"},
	1161: &SQLError{1161, "ER_NET_WRITE_INTERRUPTED", "08S01"},
	1162: &SQLError{1162, "ER_TOO_LONG_STRING", "42000"},
	1163: &SQLError{1163, "ER_TABLE_CANT_HANDLE_BLOB", "42000"},
	1164: &SQLError{1164, "ER_TABLE_CANT_HANDLE_AUTO_INCREMENT", "42000"},
	1166: &SQLError{1166, "ER_WRONG_COLUMN_NAME", "42000"},
	1167: &SQLError{1167, "ER_WRONG_KEY_COLUMN", "42000"},
	1169: &SQLError{1169, "ER_DUP_UNIQUE", "23000"},
	1170: &SQLError{1170, "ER_BLOB_KEY_WITHOUT_LENGTH", "42000"},
	1171: &SQLError{1171, "ER_PRIMARY_CANT_HAVE_NULL", "42000"},
	1172: &SQLError{1172, "ER_TOO_MANY_ROWS", "42000"},
	1173: &SQLError{1173, "ER_REQUIRES_PRIMARY_KEY", "42000"},
	1177: &SQLError{1177, "ER_CHECK_NO_SUCH_TABLE", "42000"},
	1178: &SQLError{1178, "ER_CHECK_NOT_IMPLEMENTED", "42000"},
	1179: &SQLError{1179, "ER_CANT_DO_THIS_DURING_AN_TRANSACTION", "25000"},
	1184: &SQLError{1184, "ER_NEW_ABORTING_CONNECTION", "08S01"},
	1189: &SQLError{1189, "ER_MASTER_NET_READ", "08S01"},
	1190: &SQLError{1190, "ER_MASTER_NET_WRITE", "08S01"},
	1203: &SQLError{1203, "ER_TOO_MANY_USER_CONNECTIONS", "42000"},
	1205: &SQLError{1205, "ER_LOCK_WAIT_TIMEOUT", "41000"},
	1207: &SQLError{1207, "ER_READ_ONLY_TRANSACTION", "25000"},
	1211: &SQLError{1211, "ER_NO_PERMISSION_TO_CREATE_USER", "42000"},
	1213: &SQLError{1213, "ER_LOCK_DEADLOCK", "40001"},
	1216: &SQLError{1216, "ER_NO_REFERENCED_ROW", "23000"},
	1217: &SQLError{1217, "ER_ROW_IS_REFERENCED", "23000"},
	1218: &SQLError{1218, "ER_CONNECT_TO_MASTER", "08S01"},
	1222: &SQLError{1222, "ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT", "21000"},
	1226: &SQLError{1226, "ER_USER_LIMIT_REACHED", "42000"},
	1230: &SQLError{1230, "ER_NO_DEFAULT", "42000"},
	1231: &SQLError{1231, "ER_WRONG_VALUE_FOR_VAR", "42000"},
	1232: &SQLError{1232, "ER_WRONG_TYPE_FOR_VAR", "42000"},
	1234: &SQLError{1234, "ER_CANT_USE_OPTION_HERE", "42000"},
	1235: &SQLError{1235, "ER_NOT_SUPPORTED_YET", "42000"},
	1239: &SQLError{1239, "ER_WRONG_FK_DEF", "42000"},
	1241: &SQLError{1241, "ER_OPERAND_COLUMNS", "21000"},
	1242: &SQLError{1242, "ER_SUBQUERY_NO_1_ROW", "21000"},
	1247: &SQLError{1247, "ER_ILLEGAL_REFERENCE", "42S22"},
	1248: &SQLError{1248, "ER_DERIVED_MUST_HAVE_ALIAS", "42000"},
	1249: &SQLError{1249, "ER_SELECT_REDUCED", "01000"},
	1250: &SQLError{1250, "ER_TABLENAME_NOT_ALLOWED_HERE", "42000"},
	1251: &SQLError{1251, "ER_NOT_SUPPORTED_AUTH_MODE", "08004"},
	1252: &SQLError{1252, "ER_SPATIAL_CANT_HAVE_NULL", "42000"},
	1253: &SQLError{1253, "ER_COLLATION_CHARSET_MISMATCH", "42000"},
	1261: &SQLError{1261, "ER_WARN_TOO_FEW_RECORDS", "01000"},
	1262: &SQLError{1262, "ER_WARN_TOO_MANY_RECORDS", "01000"},
	1263: &SQLError{1263, "ER_WARN_NULL_TO_NOTNULL", "01000"},
	1264: &SQLError{1264, "ER_WARN_DATA_OUT_OF_RANGE", "01000"},
	1265: &SQLError{1265, "ER_WARN_DATA_TRUNCATED", "01000"},
	1280: &SQLError{1280, "ER_WRONG_NAME_FOR_INDEX", "42000"},
	1281: &SQLError{1281, "ER_WRONG_NAME_FOR_CATALOG", "42000"},
	1286: &SQLError{1286, "ER_UNKNOWN_STORAGE_ENGINE", "42000"},
}
